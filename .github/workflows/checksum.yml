name: "ðŸ†— Checksum"

on:
  pull_request:
    paths:
      - "lib/sh/**"
      - "lib/zsh/**"
  push:
    paths:
      - "lib/sh/**"
      - "lib/zsh/**"
    branches: [main]
    tags:
      - "v*.*.*"
  workflow_dispatch: {}

jobs:
  checksum:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: "ðŸ†— Generate checksum"
        uses: jmgilman/actions-generate-checksum@57c13a1f01a90b2a8bb449ec29bc23728b96c1cd
        with:
          patterns: |
            lib/sh/install.sh
            lib/zsh/init.zsh
      - run: mv checksum.txt lib/
      - name: "ðŸ†— Commit"
        uses: z-shell/.github/actions/commit@main
        with:
          commitMessage: Checksum ${{ github.sha }}
          workDir: lib
          commitUserName: digital-teams[bot]
          commitUserEmail: digital-teams@pm.me
