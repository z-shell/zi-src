name: "ðŸ†— Checksum"

on:
  push:
    paths:
      - "lib/sh/**"
      - "lib/zsh/**"
    branches: [main]
  workflow_dispatch: {}

jobs:
  checksum:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: "ðŸ†— Generate checksum"
        uses: jmgilman/actions-generate-checksum@24a35957fba81c6cbaefeb1e3d59ee56e3db5077
        with:
          patterns: |
            lib/sh/install.sh
            lib/zsh/init.zsh
      - run: mv checksum.txt lib/
      - name: "ðŸ†— Commit"
        uses: z-shell/.github/actions/commit@main
        with:
          commitMessage: Checksum ${{ github.sha }}
          workDir: lib
          commitUserName: digital-teams[bot]
          commitUserEmail: digital-teams@pm.me
